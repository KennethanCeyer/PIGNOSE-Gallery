//================================================================================
// [pg-gallery]
// version: 1.0.1
// update: 2016.11.05
//================================================================================

!function(a){"use strict";var b={name:"PIGNOSE Gallery JS",dev:{id:"pignose_gallery",handler:".pignoseGalleryHandler"},plugin:{index:0}},c={_throw:function(c,d){a.error("'"+b.name+"' load failed ("+d+"): "+c)},_bind:function(a,c,d,e){var f=c.replace(/(\w+(?=\s)?)/gi,"$1"+b.dev.handler);return a.unbind(f).bind(f,d),!!e==!0&&a.triggerHandler(f),a},_unbind:function(a,c){var d=c.replace(/(\w+(?=\s)?)/gi,"$1"+b.dev.handler);a.unbind(d)},_trigger:function(a,c){var d=c.replace(/(\w+(?=\s)?)/gi,"$1"+b.dev.handler);a.triggerHandler(d)},_excute:function(a){"function"==typeof a&&null!=a&&a.apply(b.plugin.object,Array.prototype.slice.call(arguments,1))},_extend:function(a,b){var d=arguments;"object"==typeof a&&null!=a&&(a[b]=function(){c[b].apply(this,Array.prototype.slice.call(d,2))})},_save:function(a){var a=a||b.plugin.object;if(a.length>0)return a[0][b.dev.id]=b.plugin,b.plugin},_load:function(a){var a=a||b.plugin.object;if(a.length>0)return b.plugin=a[0][b.dev.id],b.plugin},init:function(d){var e=a.extend({focus:0,thumbnails:null,time:3e3,auto:!0,hover:!0},d),f=this;return f.each(function(){var d=a(this);b.plugin.object=d.addClass("pignose-gallery"),b.plugin.views=d.find(".gallery-item").addClass("pignose-gallery-item"),c._save(),c._excute(c.render,e)})},render:function(d){if("undefined"!=typeof d.thumbnails&&null!==d.thumbnails){var e=a(this);c._load(e),b.plugin.list=e.find(d.thumbnails).addClass("pignose-gallery-thumbnails").find("a").addClass("pignose-gallery-thumbnails-item").each(function(b,c){var d=a(this),e=a('<span class="pignose-gallery-border">&nbsp;</span>');e.appendTo(d)}),b.plugin.max=b.plugin.list.children().length,b.plugin.index=d.focus+1>b.plugin.max?b.plugin.max-1:d.focus,c._save(),c._excute(c.process,d)}},process:function(d){var e=a(this),f=null,g=null,h=function(){b.plugin.list.find(".pignose-gallery-border.active").removeClass("active"),b.plugin.list.eq(b.plugin.index).children(".pignose-gallery-border").addClass("active");var d=(b.plugin.views.eq(b.plugin.index)||b.plugin.views.eq(0)).each(function(){var b=a(this);b.addClass("anim-start"),setTimeout(function(){b.addClass("active")},25)}).siblings(".pignose-gallery-item").removeClass("active");try{null!==g&&clearTimeout(g)}catch(a){}g=setTimeout(function(){d.removeClass("anim-start")},300),c._save()};c._load(e),d.auto===!0&&(c._bind(e.add(b.plugin.list),"mouseover",function(){try{clearInterval(f)}catch(a){}}),c._bind(e.add(b.plugin.list),"mouseout",function(){try{clearInterval(f)}catch(a){}f=setInterval(function(){c._load(e),b.plugin.index=(b.plugin.index+1)%b.plugin.max,h.call()},d.time)},!0)),d.hover===!0&&c._bind(b.plugin.list,"mouseover",function(){var c=a(this);b.plugin.index=c.index(),h.call()}),c._bind(b.plugin.list,"click",function(c){c.preventDefault();var d=a(this);b.plugin.index=d.index(),h.call()}),c._trigger(b.plugin.list.eq(b.plugin.index),"click")}};a.fn.pignoseGallery=function(a){var b=1;return"function"==typeof c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?(c._throw("an error has occurred in initialization.",0),b):c.init.apply(this,arguments)}}(jQuery);